---
import { getCollection } from 'astro:content'
import BaseLayout from '../../layouts/BaseLayout.astro'
import BlogCard from '../../components/content/BlogCard.astro'

const posts = (await getCollection('blog', ({ data }) => (
  import.meta.env.PROD ? !data.draft : true
))).sort((a, b) => b.data.pubDate - a.data.pubDate)
---

<BaseLayout title="Blog | My Teaching Resources" description="Explore our latest articles and teaching resources">
  <!-- Hero Section -->
  <section class="hero hero-bg from-brand-primary to-brand-secondary text-white py-32 mb-16">
    <div class="container mx-auto text-center px-4">
      <h1 class="text-6xl font-extrabold mb-4">Teaching Blog</h1>
      <p class="text-2xl max-w-2xl mx-auto mb-8 opacity-90">
        Practical insights and resources for modern educators
      </p>
      <a
        href="/subscribe"
        class="btn btn-lg btn-neutral hover:btn-primary transition"
      >
        Subscribe for Updates
      </a>
    </div>
  </section>

  <main class="container mx-auto px-4 pb-16">
    <!-- Featured Articles -->
    <section class="mb-20">
      <h2 class="text-4xl font-semibold mb-8">Featured Articles</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {posts.slice(0, 2).map(post => (
          <div class="card bg-base-100 shadow-lg fade-in-up h-full">
            <BlogCard post={post} featured class="h-full" />
          </div>
        ))}
      </div>
    </section>

    <!-- Latest Articles Grid -->
    <section>
      <h2 class="text-4xl font-semibold mb-8">Latest Articles</h2>
      {posts.length > 0 ? (
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
          {posts.map(post => (
            <div class="fade-in-up">
              <BlogCard post={post} />
            </div>
          ))}
        </div>
      ) : (
        <div class="text-center py-16">
          <p class="text-lg text-gray-500">No articles found yet. Check back soon!</p>
        </div>
      )}
    </section>
  </main>
</BaseLayout>
